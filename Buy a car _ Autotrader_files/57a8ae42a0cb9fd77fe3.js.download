(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1271:function(t,e,o){"use strict";o(12),o(10),o(17),o(20),o(5),o(4),o(8);var r=o(2),n=o(7),c=o(931),l=o(787),h=o(889);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}var m={components:{AutoComplete:c.a,AppDropdown:l.a,CloseCircleSvg:h.a},props:{namespace:{type:String,default:""},extraClass:{type:String,default:""},hideRadius:{type:Boolean,default:!1},gtmIds:{type:Object,default:null}},data:function(){return{radius:5}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(n.d)({radiusOptions:"filterOptions/radius"}),{suburbPostcodeState:function(){var t=this.$store.state[this.namespace].segments.state,e=this.$store.state[this.namespace].segments.locality;return e&&t&&Object.keys(t).length&&Object.keys(e).length&&"suburb-postcode"===e.locality_type?"".concat(e.name," ").concat(e.postcode,", ").concat(t.abbreviation):""},suburbPostcodesAPI:function(){return"".concat("https://location.platform.autotrader.com.au/api/v1","/suburbpostcodes/search")}}),mounted:function(){var t=this.$store.state[this.namespace].segments.locality;this.$store.state[this.namespace].query.distance?this.radius=this.$store.state[this.namespace].query.distance:t&&Object.prototype.hasOwnProperty.call(t,"default_radius")&&(this.radius=t.default_radius)},methods:{onShowPostcode:function(data){return"".concat(data._source.name," ").concat(data._source.postcode,", ").concat(data._source.state.abbreviation)},onPostcodeSelect:function(data){this.$analytics.pushGTMUserInteraction(1447),this.radius=data._source.default_radius,this.$store.commit("userLocation/setState",{source:"location",data:data._source}),this.$store.commit("".concat(this.namespace,"/resetQuery")),this.$store.commit("".concat(this.namespace,"/setQueryField"),{field:"distance",value:""}),this.$store.commit("".concat(this.namespace,"/setQueryField"),{field:"state",value:""}),this.$store.commit("".concat(this.namespace,"/setSegmentField"),{field:"state",value:{name:data._source.state.name,name_seo:data._source.state.abbreviation.toLowerCase(),abbreviation:data._source.state.abbreviation,locality_type:"state"}}),this.$store.commit("".concat(this.namespace,"/setSegmentField"),{field:"locality",value:{id:data._source.id,name:data._source.name,name_seo:data._source.name.replace(/\s|_|\//g,"-").toLowerCase(),postcode:data._source.postcode,search_type:data._source.search_type,default_radius:data._source.default_radius,lat:data._source.location.lat,lon:data._source.location.lon,locality_type:"suburb-postcode"}}),this.$store.commit("".concat(this.namespace,"/setLocation"),{}),"search"===this.namespace?this.$store.commit("search/setDoUrlParser",!1):"dealerSearch"===this.namespace&&this.$store.commit("dealerSearch/setDoUrlParser",!1),"homePostcode"!==this.extraClass&&this.$router.push({path:this.$urlBuilder.getUrl(this.$store.state[this.namespace].segments,this.$route),query:this.$store.getters["".concat(this.namespace,"/minimalQuery")]})},handleRadiusChange:function(t){this.$store.commit("".concat(this.namespace,"/resetQuery")),this.$store.commit("".concat(this.namespace,"/setQueryField"),{field:"distance",value:t}),this.$store.commit("".concat(this.namespace,"/setQueryField"),{field:"state",value:""}),"search"===this.namespace?this.$store.commit("search/setDoUrlParser",!1):"dealerSearch"===this.namespace&&this.$store.commit("dealerSearch/setDoUrlParser",!1),this.$router.push({query:this.$store.getters["".concat(this.namespace,"/minimalQuery")]})},handleAutoCompleteClear:function(){this.$analytics.pushGTMUserInteraction(1448),this.$store.commit("".concat(this.namespace,"/resetQuery")),this.$store.commit("".concat(this.namespace,"/setQueryField"),{field:"distance",value:""}),this.$store.commit("".concat(this.namespace,"/setQueryField"),{field:"state",value:""}),this.$store.commit("".concat(this.namespace,"/setSegmentField"),{field:"state",value:{}}),this.$store.commit("".concat(this.namespace,"/setSegmentField"),{field:"locality",value:{}}),"search"===this.namespace?this.$store.commit("search/setDoUrlParser",!1):"dealerSearch"===this.namespace&&this.$store.commit("dealerSearch/setDoUrlParser",!1),"homePostcode"!==this.extraClass&&this.$router.push({path:this.$urlBuilder.getUrl(this.$store.state[this.namespace].segments,this.$route),query:this.$store.getters["".concat(this.namespace,"/minimalQuery")]})}}},f=(o(1357),o(3)),component=Object(f.a)(m,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"postcodeFilter"},[o("auto-complete",{staticClass:"postcodeFilter--autoComplete",attrs:{id:"postcode",placeholder:"Suburb/Postcode","init-value":t.suburbPostcodeState,url:t.suburbPostcodesAPI,param:"suggest",min:2,"on-show-data":t.onShowPostcode,"on-select":t.onPostcodeSelect,"extra-class":t.extraClass}}),t._v(" "),t.suburbPostcodeState&&"homePostcode"!==t.extraClass?o("span",{staticClass:"postcodeFilter--autoCompleteClear",on:{click:t.handleAutoCompleteClear}},[o("close-circle-svg",{staticClass:"svgIcon postcodeFilter--clearIcon"})],1):t._e(),t._v(" "),o("no-ssr",[t.suburbPostcodeState&&"homePostcode"!==t.extraClass&&!t.hideRadius?o("app-dropdown",{class:"postcodeFilter--dropdown",attrs:{id:"radius",options:t.radiusOptions},on:{change:t.handleRadiusChange},model:{value:t.radius,callback:function(e){t.radius=e},expression:"radius"}}):t._e()],1)],1)}),[],!1,null,"4aa9bc80",null);e.a=component.exports},1357:function(t,e,o){"use strict";var r=o(976);o.n(r).a},769:function(t,e,o){},782:function(t,e,o){"use strict";o(25);var r={props:{type:{type:String,default:"text"},id:{type:String,default:""},className:{type:String,default:""},hasError:{type:Boolean,default:!1},placeholder:{type:String,default:""},value:{type:[String,Number],default:""},isDisabled:{type:Boolean,default:!1}}},n=(o(830),o(3)),component=Object(n.a)(r,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{staticClass:"textBox",class:{"has-error":t.hasError},attrs:{id:t.id,type:t.type,name:t.id,placeholder:t.placeholder,disabled:t.isDisabled,autocomplete:"off"},domProps:{value:t.value},on:{blur:function(e){return t.$emit("blur",e)},click:function(e){return t.$emit("click",e.target.value)},focus:function(e){return t.$emit("focus",e)},input:function(e){return t.$emit("input",e.target.value)},keydown:function(e){return t.$emit("keydown",e)}}})}),[],!1,null,"026bfda0",null);e.a=component.exports},790:function(t,e,o){},830:function(t,e,o){"use strict";var r=o(769);o.n(r).a},888:function(t,e,o){"use strict";o(4),o(52),o(53);function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0;var n=r;function c(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var o=this;t((function(t){o.reason||(o.reason=new n(t),e(o.reason))}))}c.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},c.source=function(){var t;return{token:new c((function(e){t=e})),cancel:t}};e.a=c},889:function(t,e,o){"use strict";o(12),o(10),o(5),o(4),o(8);var r=o(2),n=o(13);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}e.a={functional:!0,render:function(t,e){var o=e._c,l=e._v,data=e.data,h=e.children,d=void 0===h?[]:h,m=data.class,f=data.staticClass,style=data.style,y=data.staticStyle,v=data.attrs,w=void 0===v?{}:v,C=Object(n.a)(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[m,f],style:[style,y],attrs:Object.assign({viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},w)},C),d.concat([o("title",[l("CloseCircle")]),o("desc",[l("Created with Sketch.")]),o("defs"),o("g",{attrs:{id:"AutoTrader-Style-Guide",stroke:"none","stroke-width":"1","fill-rule":"evenodd"}},[o("g",{attrs:{id:"AT-Style-Guide",transform:"translate(-1062.000000, -3205.000000)"}},[o("path",{attrs:{d:"M1082.69565,3222.9717 C1082.69565,3222.67294 1082.57263,3222.39176 1082.36175,3222.18087 L1079.18087,3219 L1082.36175,3215.81913 C1082.57263,3215.60824 1082.69565,3215.32706 1082.69565,3215.0283 C1082.69565,3214.72954 1082.57263,3214.43079 1082.36175,3214.2199 L1080.7801,3212.63825 C1080.56921,3212.42737 1080.27046,3212.30435 1079.9717,3212.30435 C1079.67294,3212.30435 1079.39176,3212.42737 1079.18087,3212.63825 L1076,3215.81913 L1072.81913,3212.63825 C1072.60824,3212.42737 1072.32706,3212.30435 1072.0283,3212.30435 C1071.72954,3212.30435 1071.43079,3212.42737 1071.2199,3212.63825 L1069.63825,3214.2199 C1069.42737,3214.43079 1069.30435,3214.72954 1069.30435,3215.0283 C1069.30435,3215.32706 1069.42737,3215.60824 1069.63825,3215.81913 L1072.81913,3219 L1069.63825,3222.18087 C1069.42737,3222.39176 1069.30435,3222.67294 1069.30435,3222.9717 C1069.30435,3223.27046 1069.42737,3223.56921 1069.63825,3223.7801 L1071.2199,3225.36175 C1071.43079,3225.57263 1071.72954,3225.69565 1072.0283,3225.69565 C1072.32706,3225.69565 1072.60824,3225.57263 1072.81913,3225.36175 L1076,3222.18087 L1079.18087,3225.36175 C1079.39176,3225.57263 1079.67294,3225.69565 1079.9717,3225.69565 C1080.27046,3225.69565 1080.56921,3225.57263 1080.7801,3225.36175 L1082.36175,3223.7801 C1082.57263,3223.56921 1082.69565,3223.27046 1082.69565,3222.9717 Z M1090,3219 C1090,3226.72917 1083.72917,3233 1076,3233 C1068.27083,3233 1062,3226.72917 1062,3219 C1062,3211.27083 1068.27083,3205 1076,3205 C1083.72917,3205 1090,3211.27083 1090,3219 Z",id:"CloseCircle"}})])])]))}}},905:function(t,e,o){"use strict";var r=o(790);o.n(r).a},931:function(t,e,o){"use strict";o(25);var r=o(888);var n=o(782),c=o(889),l={components:{TextBox:n.a,CloseCircleSvg:c.a},props:{id:{type:String,default:""},className:{type:String,default:""},placeholder:{type:String,default:""},initValue:{type:String,default:""},url:{type:String,required:!0},param:{type:String,default:"query"},customParams:{type:Object,default:function(){return{}}},customHeaders:{type:Object,default:function(){return{}}},min:{type:Number,default:0},process:{type:Function,default:null},onShowData:{type:Function,default:function(data){return data}},onSelect:{type:Function,default:null},hasError:{type:Boolean,default:!1},extraClass:{type:String,default:""},tabindex:{type:Number,default:0}},data:function(){return{json:[],current:"",selected:"",showList:!1,focusList:0,searchTimer:0,deleteFlag:!1}},mounted:function(){this.searchTimer=0,this.source=r.a.source(),this.current=this.initValue||null},methods:{handleDelete:function(){this.deleteFlag=!0},handleBlur:function(){this.showList=!1,this.selected&&!this.deleteFlag&&(this.current=this.selected),this.deleteFlag=!1},handleFocus:function(){this.showList=!0},handleInput:function(t){return this.showList=!0,this.getData(t)},handleClick:function(){this.showList=!this.showList},handleKeydown:function(t){if(this.showList){switch(t.keyCode){case 38:t.preventDefault(),this.focusList--;break;case 40:t.preventDefault(),this.focusList++;break;case 13:t.preventDefault(),this.onSelectList(this.json[this.focusList]),this.showList=!1;break;case 27:this.showList=!1}var e=this.json.length-1,o=this.focusList;this.focusList>e?o=0:this.focusList<0&&(o=e),this.focusList=o}},onSelectList:function(data){this.showList=!1,this.current=this.onShowData(data),this.selected=this.current,this.onSelect&&this.onSelect(data)},clearPostcodeSearch:function(){this.showList=!1,this.selected="",this.current=""},handleMousedown:function(t){t.preventDefault()},handleHover:function(i){this.focusList=i},getData:function(t){var e=this;t.length<this.min||!this.url?(this.json=[],this.showList=!1):(this.source.cancel("Input change"),clearTimeout(this.searchTimer),this.searchTimer=setTimeout((function(){e.doAjax(t)}),200))},doAjax:function(t){var e=this;this.source=r.a.source();var o=this.customParams;o[this.param]=t,this.$axios.get(this.url,{params:o,cancelToken:this.source.token,headers:this.customHeaders}).then((function(t){e.json=e.process?e.process(t.data):t.data})).catch((function(t){(function(t){return!(!t||!t.__CANCEL__)})(t)||e.$newrelic.noticeError(t)}))}},closeList:function(){this.showList=!1}},h=(o(905),o(3)),component=Object(h.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"autocomplete-wrapper",class:t.extraClass},[o("text-box",{staticClass:"autocomplete-input",class:t.className,attrs:{id:t.id,name:t.id,placeholder:t.placeholder,"has-error":t.hasError,tabindex:t.tabindex,autocomplete:"off"},on:{blur:t.handleBlur,focus:t.handleFocus,input:t.handleInput,keydown:[t.handleKeydown,function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.handleDelete(e)}],click:t.handleClick},model:{value:t.current,callback:function(e){t.current=e},expression:"current"}}),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.showList&&t.json.length,expression:"showList && json.length"}],staticClass:"autocomplete-list",class:t.className,attrs:{"data-cy":t.id+"-autoComplete"}},[o("ul",t._l(t.json,(function(data,i){return o("li",{key:i,class:{"is-focus":i===t.focusList},attrs:{"data-cy":t.id+"-autoComplete-item"+i},on:{click:function(e){return t.onSelectList(data)},mousedown:t.handleMousedown,mousemove:function(e){return t.handleHover(i)}}},[t._v("\n        "+t._s(t.onShowData(data))+"\n      ")])})),0)]),t._v(" "),"homePostcode"===t.extraClass&&null!==t.current&&""!==t.current?o("span",{staticClass:"postcodeFilter--autoCompleteClear",class:t.extraClass,on:{click:t.clearPostcodeSearch}},[o("close-circle-svg",{staticClass:"svgIcon postcodeFilter--clearIcon"})],1):t._e()],1)}),[],!1,null,"2e7dd3e4",null);e.a=component.exports},976:function(t,e,o){}}]);